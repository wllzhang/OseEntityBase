<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>æ•°å­—åœ°å›¾è„šæ‰‹æ¶åº“: æ•°å­—åœ°å›¾è„šæ‰‹æ¶åº“ (API æ–‡æ¡£)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
<script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
<script type="text/javascript">
    DoxygenAwesomeDarkModeToggle.init()
    DoxygenAwesomeFragmentCopyButton.init()
    DoxygenAwesomeParagraphLink.init()
</script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!-- åˆ¶ä½œè€… Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','æœç´¢');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">è½½å…¥ä¸­...</div>
<div class="SRStatus" id="Searching">æœç´¢ä¸­...</div>
<div class="SRStatus" id="NoMatches">æœªæ‰¾åˆ°</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">æ•°å­—åœ°å›¾è„šæ‰‹æ¶åº“ (API æ–‡æ¡£) </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>æ¬¢è¿ä½¿ç”¨æ•°å­—åœ°å›¾è„šæ‰‹æ¶åº“ã€‚æœ¬é¡¹ç›®åŸºäº Qtã€OpenSceneGraph (OSG) ä¸ osgEarthï¼Œå›´ç»•"å®ä½“ï¼ˆGeo Entitiesï¼‰- ç®¡ç†å™¨ï¼ˆManagersï¼‰- è§†å›¾ï¼ˆOSG/Qt é›†æˆï¼‰"çš„åˆ†å±‚æ¶æ„ï¼Œæä¾›æ ‡å‡†åŒ–çš„å®ä½“ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€åœ°å›¾çŠ¶æ€ç›‘æ§ã€æ–¹æ¡ˆè§„åˆ’ä¸äº¤äº’æ‰©å±•èƒ½åŠ›ã€‚</p>
<h2><a class="anchor" id="autotoc_md0"></a>
ğŸ“– é¡¹ç›®æ¦‚è¿°</h2>
<p>æ•°å­—åœ°å›¾è„šæ‰‹æ¶åº“æ˜¯ä¸€ä¸ªå¯æ‰©å±•çš„æ•°å­—åœ°å›¾åº”ç”¨æ¡†æ¶ï¼Œæä¾›å®Œæ•´çš„åœ°ç†å®ä½“ç®¡ç†ã€æ¸²æŸ“å’Œäº¤äº’åŠŸèƒ½ã€‚ä¸»è¦ç‰¹æ€§åŒ…æ‹¬ï¼š</p>
<ul>
<li>ğŸ—ºï¸ <b>3Dåœ°çƒæ¸²æŸ“</b> - åŸºäºosgEarthçš„é«˜æ€§èƒ½3Dåœ°çƒæ¸²æŸ“</li>
<li>ğŸ¯ <b>å®ä½“ç®¡ç†ç³»ç»Ÿ</b> - ç»Ÿä¸€çš„åœ°ç†å®ä½“ç”Ÿå‘½å‘¨æœŸç®¡ç†</li>
<li>ğŸ“‹ <b>æ–¹æ¡ˆè§„åˆ’</b> - å®Œæ•´çš„æ–¹æ¡ˆæ–‡ä»¶ç®¡ç†å’Œå®ä½“è§„åˆ’åŠŸèƒ½</li>
<li>ğŸ”„ <b>2D/3Dè§†å›¾åˆ‡æ¢</b> - çµæ´»çš„è§†è§’åˆ‡æ¢å’Œç›¸æœºæ§åˆ¶</li>
<li>ğŸ¨ <b>å¯æ‰©å±•æ¶æ„</b> - åŸºäºç»§æ‰¿çš„å®ä½“ç±»å‹æ‰©å±•æœºåˆ¶</li>
</ul>
<h2><a class="anchor" id="autotoc_md1"></a>
ğŸ“ æ¨¡å—ç»“æ„</h2>
<h3><a class="anchor" id="autotoc_md2"></a>
åœ°ç†å®ä½“æ¨¡å— (geo/)</h3>
<p>æ ¸å¿ƒå®ä½“ç±»å’Œåœ°ç†ç›¸å…³åŠŸèƒ½ï¼š</p>
<ul>
<li><b><a class="el" href="classGeoEntity.html" title="é€šç”¨åœ°ç†å®ä½“åŸºç±»">GeoEntity</a></b> - é€šç”¨åœ°ç†å®ä½“åŸºç±»ï¼Œæä¾›ç»Ÿä¸€çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†</li>
<li><b><a class="el" href="classImageEntity.html" title="å›¾ç‰‡å®ä½“ç±»">ImageEntity</a></b> - å›¾ç‰‡å®ä½“å®ç°ï¼Œæ”¯æŒ2Då›¾æ ‡æ˜¾ç¤ºå’Œé«˜äº®</li>
<li><b><a class="el" href="classWaypointEntity.html" title="èˆªç‚¹å®ä½“">WaypointEntity</a></b> - èˆªç‚¹å®ä½“å®ç°ï¼Œæ”¯æŒèˆªç‚¹æ ‡ç»˜å’Œè·¯çº¿è§„åˆ’</li>
<li><b><a class="el" href="classGeoEntityManager.html" title="åœ°ç†å®ä½“ç®¡ç†å™¨">GeoEntityManager</a></b> - å®ä½“ç®¡ç†å™¨ï¼Œç»Ÿä¸€ç®¡ç†æ‰€æœ‰å®ä½“çš„åˆ›å»ºã€åˆ é™¤ã€æŸ¥è¯¢å’Œäº¤äº’</li>
<li><b><a class="el" href="classMapStateManager.html" title="åœ°å›¾çŠ¶æ€ç®¡ç†å™¨">MapStateManager</a></b> - åœ°å›¾çŠ¶æ€ç®¡ç†å™¨ï¼Œç›‘æ§ç›¸æœºè§†è§’å’Œé¼ æ ‡ä½ç½®</li>
<li><b><a class="el" href="classGeoUtils.html" title="åœ°ç†åæ ‡è½¬æ¢å·¥å…·ç±»">GeoUtils</a></b> - åœ°ç†å·¥å…·ç±»ï¼Œæä¾›åæ ‡è½¬æ¢ã€è·ç¦»è®¡ç®—ç­‰å®ç”¨åŠŸèƒ½</li>
</ul>
<h3><a class="anchor" id="autotoc_md3"></a>
UIç•Œé¢æ¨¡å— (ui/)</h3>
<p>ç”¨æˆ·ç•Œé¢ç›¸å…³çš„å¯¹è¯æ¡†å’Œä¸»çª—å£ï¼š</p>
<ul>
<li><b>MainWidget</b> - åº”ç”¨ç¨‹åºä¸»çª—å£ï¼Œæ•´åˆæ‰€æœ‰åŠŸèƒ½æ¨¡å—</li>
<li><b>ComponentConfigDialog</b> - ç»„ä»¶é…ç½®å¯¹è¯æ¡†ï¼Œç”¨äºé…ç½®æ¨¡å‹ç»„ä»¶å‚æ•°</li>
<li><b>ModelAssemblyDialog</b> - æ¨¡å‹ç»„è£…å¯¹è¯æ¡†ï¼Œç®¡ç†æ¨¡å‹ç»„è£…é…ç½®</li>
<li><b>ModelDeployDialog</b> - æ¨¡å‹éƒ¨ç½²å¯¹è¯æ¡†ï¼Œæ˜¾ç¤ºæ¨¡å‹åˆ—è¡¨å¹¶æ”¯æŒæ‹–æ‹½éƒ¨ç½²</li>
<li><b>EntityPropertyDialog</b> - å®ä½“å±æ€§ç¼–è¾‘å¯¹è¯æ¡†ï¼Œç¼–è¾‘å®ä½“çš„æ‰€æœ‰å±æ€§ï¼ˆè§„åˆ’å±æ€§ã€æ¨¡å‹ç»„è£…ã€ç»„ä»¶é…ç½®ï¼‰</li>
</ul>
<h3><a class="anchor" id="autotoc_md4"></a>
è‡ªå®šä¹‰æ§ä»¶æ¨¡å— (widgets/)</h3>
<p>å¯é‡ç”¨çš„è‡ªå®šä¹‰Qtæ§ä»¶ï¼š</p>
<ul>
<li><b>OsgMapWidget</b> - OSGåœ°å›¾æ§ä»¶ï¼Œå°è£…OSGæ¸²æŸ“å’Œåœ°å›¾äº¤äº’</li>
<li><b>DraggableListWidget</b> - å¯æ‹–æ‹½åˆ—è¡¨æ§ä»¶ï¼Œæ”¯æŒæ‹–æ‹½æ“ä½œ</li>
<li><b>ImageViewerWindow</b> - å›¾ç‰‡æŸ¥çœ‹å™¨çª—å£ï¼Œæ˜¾ç¤ºå’Œé€‰æ‹©å®ä½“å›¾ç‰‡</li>
</ul>
<h3><a class="anchor" id="autotoc_md5"></a>
æ–¹æ¡ˆç®¡ç†æ¨¡å— (plan/)</h3>
<p>æ–¹æ¡ˆæ–‡ä»¶ç®¡ç†å’Œè§„åˆ’åŠŸèƒ½ï¼š</p>
<ul>
<li><b>PlanFileManager</b> - æ–¹æ¡ˆæ–‡ä»¶ç®¡ç†å™¨ï¼Œè´Ÿè´£æ–¹æ¡ˆçš„åˆ›å»ºã€ä¿å­˜ã€åŠ è½½å’Œç®¡ç†<ul>
<li>æ–¹æ¡ˆæ–‡ä»¶æ ¼å¼ï¼šJSONæ ¼å¼ï¼ŒåŒ…å«å®ä½“ä¿¡æ¯ã€ç›¸æœºè§†è§’ç­‰</li>
<li>ç»„ä»¶ä¿¡æ¯æ·±å±‚å¤åˆ¶ï¼šä¿å­˜å®Œæ•´çš„ç»„ä»¶é…ç½®ï¼Œç‹¬ç«‹äºæ•°æ®åº“</li>
</ul>
</li>
</ul>
<h3><a class="anchor" id="autotoc_md6"></a>
å·¥å…·æ¨¡å— (util/)</h3>
<p>é€šç”¨å·¥å…·ç±»ï¼š</p>
<ul>
<li><b>DatabaseUtils</b> - æ•°æ®åº“å·¥å…·ç±»ï¼Œç»Ÿä¸€ç®¡ç†æ•°æ®åº“è¿æ¥å’Œæ“ä½œ</li>
</ul>
<h3><a class="anchor" id="autotoc_md7"></a>
OSG-Qté›†æˆæ¨¡å— (OsgQt/)</h3>
<p>OSGä¸Qtçš„é›†æˆç»„ä»¶ï¼š</p>
<ul>
<li><b>GraphicsWindowQt</b> - Qtä¸OSGçš„å›¾å½¢çª—å£é€‚é…å™¨</li>
<li><b>QGraphicsViewAdapter</b> - QGraphicsViewé€‚é…å™¨</li>
<li><b>QWidgetImage</b> - Qt Widgetå›¾åƒå¤„ç†</li>
</ul>
<h2><a class="anchor" id="autotoc_md8"></a>
ğŸ“š æ¨¡å—åˆ†ç»„ï¼ˆDoxygen Groupsï¼‰</h2>
<p>ä»¥ä¸‹ç« èŠ‚ä¸ä»£ç ä¸­çš„ Doxygen åˆ†ç»„ä¸€è‡´ï¼Œä¾¿äºåœ¨ç”Ÿæˆæ–‡æ¡£ä¸­å¿«é€Ÿå¯¼èˆªï¼š</p>
<ul>
<li><a class="el" href="group__geo__entities.html">Geo Entities</a> â€” é€šç”¨åœ°ç†å®ä½“ä¸å®ç°ï¼ˆ<code><a class="el" href="classGeoEntity.html" title="é€šç”¨åœ°ç†å®ä½“åŸºç±»">GeoEntity</a></code>ã€<code><a class="el" href="classImageEntity.html" title="å›¾ç‰‡å®ä½“ç±»">ImageEntity</a></code>ã€<code><a class="el" href="classWaypointEntity.html" title="èˆªç‚¹å®ä½“">WaypointEntity</a></code>ï¼‰</li>
<li><a class="el" href="group__managers.html">Managers</a> â€” å®ä½“ä¸åœ°å›¾ç®¡ç†ï¼ˆ<code><a class="el" href="classGeoEntityManager.html" title="åœ°ç†å®ä½“ç®¡ç†å™¨">GeoEntityManager</a></code>ã€<code><a class="el" href="classMapStateManager.html" title="åœ°å›¾çŠ¶æ€ç®¡ç†å™¨">MapStateManager</a></code>ï¼‰</li>
</ul>
<h2><a class="anchor" id="autotoc_md9"></a>
ğŸ—ï¸ æ¶æ„æ¦‚è§ˆ</h2>
<div class="fragment"><div class="line">åº”ç”¨å±‚ (Application Layer)</div>
<div class="line">â”œâ”€â”€ MainWidget (ä¸»çª—å£)</div>
<div class="line">â”‚   â”œâ”€â”€ UIç»„ä»¶</div>
<div class="line">â”‚   â”‚   â”œâ”€â”€ ComponentConfigDialog (ç»„ä»¶é…ç½®)</div>
<div class="line">â”‚   â”‚   â”œâ”€â”€ ModelAssemblyDialog (æ¨¡å‹ç»„è£…)</div>
<div class="line">â”‚   â”‚   â”œâ”€â”€ ModelDeployDialog (æ¨¡å‹éƒ¨ç½²)</div>
<div class="line">â”‚   â”‚   â””â”€â”€ EntityPropertyDialog (å®ä½“å±æ€§ç¼–è¾‘)</div>
<div class="line">â”‚   â””â”€â”€ Widgets</div>
<div class="line">â”‚       â”œâ”€â”€ OsgMapWidget (åœ°å›¾æ§ä»¶)</div>
<div class="line">â”‚       â”œâ”€â”€ DraggableListWidget (å¯æ‹–æ‹½åˆ—è¡¨)</div>
<div class="line">â”‚       â””â”€â”€ ImageViewerWindow (å›¾ç‰‡æŸ¥çœ‹å™¨)</div>
<div class="line">â”‚</div>
<div class="line">â”œâ”€â”€ æ–¹æ¡ˆç®¡ç†å±‚ (Plan Layer)</div>
<div class="line">â”‚   â””â”€â”€ PlanFileManager (æ–¹æ¡ˆæ–‡ä»¶ç®¡ç†)</div>
<div class="line">â”‚       â”œâ”€â”€ æ–¹æ¡ˆåˆ›å»º/åŠ è½½/ä¿å­˜</div>
<div class="line">â”‚       â”œâ”€â”€ å®ä½“åºåˆ—åŒ–/ååºåˆ—åŒ–</div>
<div class="line">â”‚       â””â”€â”€ ç›¸æœºè§†è§’ä¿å­˜/æ¢å¤</div>
<div class="line">â”‚</div>
<div class="line">â”œâ”€â”€ ç®¡ç†å™¨å±‚ (Manager Layer)</div>
<div class="line">â”‚   â”œâ”€â”€ GeoEntityManager</div>
<div class="line">â”‚   â”‚   â”œâ”€â”€ å®ä½“åˆ›å»º/æŸ¥è¯¢/åˆ é™¤</div>
<div class="line">â”‚   â”‚   â”œâ”€â”€ å®ä½“é€‰æ‹©/é«˜äº®</div>
<div class="line">â”‚   â”‚   â”œâ”€â”€ é¼ æ ‡äº‹ä»¶å¤„ç†</div>
<div class="line">â”‚   â”‚   â””â”€â”€ ä¿¡å·æ§½é€šä¿¡</div>
<div class="line">â”‚   â””â”€â”€ MapStateManager</div>
<div class="line">â”‚       â”œâ”€â”€ åœ°å›¾çŠ¶æ€ç›‘æ§</div>
<div class="line">â”‚       â”œâ”€â”€ ç›¸æœºè§†è§’ç®¡ç†</div>
<div class="line">â”‚       â””â”€â”€ é¼ æ ‡ä½ç½®è·Ÿè¸ª</div>
<div class="line">â”‚</div>
<div class="line">â””â”€â”€ å®ä½“å±‚ (Entity Layer)</div>
<div class="line">    â”œâ”€â”€ GeoEntity (æŠ½è±¡åŸºç±»)</div>
<div class="line">    â”‚   â”œâ”€â”€ ç”Ÿå‘½å‘¨æœŸç®¡ç† (initialize/update/cleanup)</div>
<div class="line">    â”‚   â”œâ”€â”€ ä½ç½®å’Œæœå‘ç®¡ç†</div>
<div class="line">    â”‚   â””â”€â”€ å±æ€§ç®¡ç†</div>
<div class="line">    â”œâ”€â”€ ImageEntity (å›¾ç‰‡å®ä½“)</div>
<div class="line">    â””â”€â”€ WaypointEntity (èˆªç‚¹å®ä½“)</div>
<div class="line"> </div>
<div class="line">æ¸²æŸ“å±‚ (Rendering Layer)</div>
<div class="line">â””â”€â”€ OSG SceneGraph + osgEarth MapNode</div>
<div class="line">    â”œâ”€â”€ osg::Group (åœºæ™¯å›¾)</div>
<div class="line">    â”œâ”€â”€ osgEarth::MapNode (åœ°å›¾èŠ‚ç‚¹)</div>
<div class="line">    â””â”€â”€ osgQt::GraphicsWindowQt (Qté›†æˆ)</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md10"></a>
âœ¨ ä¸»è¦åŠŸèƒ½</h2>
<h3><a class="anchor" id="autotoc_md11"></a>
3Dåœ°å›¾æ˜¾ç¤º</h3>
<ul>
<li>åŸºäºosgEarthçš„3Dåœ°çƒæ¸²æŸ“</li>
<li>é«˜å¾·åœ°å›¾ç“¦ç‰‡é›†æˆ</li>
<li>åœ°çƒæ¼«æ¸¸æ§åˆ¶ï¼ˆç¼©æ”¾ã€æ—‹è½¬ã€å¹³ç§»ï¼‰</li>
<li>ç›¸æœºè§†è§’ç®¡ç†å’Œä¿å­˜/æ¢å¤</li>
</ul>
<h3><a class="anchor" id="autotoc_md12"></a>
å®ä½“ç®¡ç†</h3>
<ul>
<li>å®ä½“çš„åˆ›å»ºã€åˆ é™¤ã€æŸ¥è¯¢</li>
<li>æ‹–æ‹½æ·»åŠ å®ä½“ï¼ˆä»æ¨¡å‹éƒ¨ç½²å¯¹è¯æ¡†ï¼‰</li>
<li>å®ä½“ä½ç½®å’Œæœå‘æ§åˆ¶</li>
<li>å®ä½“å±æ€§ç®¡ç†ï¼ˆè§„åˆ’å±æ€§ã€æ¨¡å‹ç»„è£…ã€ç»„ä»¶é…ç½®ï¼‰</li>
<li>å®ä½“é€‰æ‹©å’Œé«˜äº®æ˜¾ç¤º</li>
</ul>
<h3><a class="anchor" id="autotoc_md13"></a>
æ–¹æ¡ˆè§„åˆ’</h3>
<ul>
<li>æ–¹æ¡ˆæ–‡ä»¶ç®¡ç†ï¼ˆæ–°å»ºã€æ‰“å¼€ã€ä¿å­˜ã€å¦å­˜ä¸ºï¼‰</li>
<li>å®ä½“è§„åˆ’éƒ¨ç½²ï¼ˆæ‹–æ‹½éƒ¨ç½²åˆ°åœ°å›¾ï¼‰</li>
<li>å®ä½“å±æ€§ç¼–è¾‘ï¼ˆå®Œæ•´çš„å±æ€§ç¼–è¾‘å¯¹è¯æ¡†ï¼‰</li>
<li>ç›¸æœºè§†è§’ä¿å­˜å’Œæ¢å¤</li>
<li>è‡ªåŠ¨ä¿å­˜åŠŸèƒ½</li>
<li>æœ€è¿‘æ–‡ä»¶ç®¡ç†</li>
<li>ç»„ä»¶ä¿¡æ¯æ·±å±‚å¤åˆ¶ï¼ˆç‹¬ç«‹äºæ•°æ®åº“ï¼‰</li>
</ul>
<h3><a class="anchor" id="autotoc_md14"></a>
2D/3Dè§†å›¾åˆ‡æ¢</h3>
<ul>
<li>åŠ¨æ€åˆ‡æ¢åœ°å›¾æ˜¾ç¤ºæ¨¡å¼</li>
<li>è‡ªå®šä¹‰è§†è§’é…ç½®</li>
<li>è§†è§’è‡ªåŠ¨è·³è½¬</li>
<li>æŒ‰é’®çŠ¶æ€åŒæ­¥</li>
</ul>
<h3><a class="anchor" id="autotoc_md15"></a>
å®ä½“äº¤äº’</h3>
<ul>
<li>å®ä½“é€‰æ‹©ç³»ç»Ÿï¼ˆç‚¹å‡»é€‰æ‹©ï¼‰</li>
<li>å®ä½“é«˜äº®æ˜¾ç¤ºï¼ˆçº¢è‰²è¾¹æ¡†ï¼‰</li>
<li>å³é”®ä¸Šä¸‹æ–‡èœå•</li>
<li>åŒå‡»ç¼–è¾‘å®ä½“å±æ€§</li>
<li>èˆªå‘è§’å’Œé«˜åº¦è®¾ç½®</li>
<li>å®ä½“åˆ é™¤å’Œå±æ€§æŸ¥çœ‹</li>
</ul>
<h2><a class="anchor" id="autotoc_md16"></a>
ğŸš€ å¿«é€Ÿå¼€å§‹</h2>
<h3><a class="anchor" id="autotoc_md17"></a>
1) åˆå§‹åŒ–åœ°å›¾å’Œå®ä½“ç®¡ç†å™¨</h3>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;widgets/OsgMapWidget.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="geoentitymanager_8h.html">geo/geoentitymanager.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="mapstatemanager_8h.html">geo/mapstatemanager.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// åˆ›å»ºåœ°å›¾æ§ä»¶</span></div>
<div class="line">OsgMapWidget* mapWidget = <span class="keyword">new</span> OsgMapWidget(<span class="keyword">this</span>);</div>
<div class="line">mapWidget-&gt;loadMap(<span class="stringliteral">&quot;earth/my.earth&quot;</span>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// ç­‰å¾…åœ°å›¾åŠ è½½å®Œæˆ</span></div>
<div class="line">connect(mapWidget, &amp;OsgMapWidget::mapLoaded, <span class="keyword">this</span>, [<span class="keyword">this</span>, mapWidget]() {</div>
<div class="line">    <span class="comment">// è·å–åœºæ™¯æ ¹èŠ‚ç‚¹å’Œåœ°å›¾èŠ‚ç‚¹</span></div>
<div class="line">    osg::Group* root = mapWidget-&gt;getRoot();</div>
<div class="line">    osgEarth::MapNode* mapNode = mapWidget-&gt;getMapNode();</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// åˆ›å»ºå®ä½“ç®¡ç†å™¨</span></div>
<div class="line">    <a class="code hl_class" href="classGeoEntityManager.html">GeoEntityManager</a>* entityManager = <span class="keyword">new</span> <a class="code hl_class" href="classGeoEntityManager.html">GeoEntityManager</a>(root, mapNode, <span class="keyword">this</span>);</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// åˆ›å»ºåœ°å›¾çŠ¶æ€ç®¡ç†å™¨</span></div>
<div class="line">    <a class="code hl_class" href="classMapStateManager.html">MapStateManager</a>* mapStateManager = <span class="keyword">new</span> <a class="code hl_class" href="classMapStateManager.html">MapStateManager</a>(</div>
<div class="line">        mapWidget-&gt;getViewer(), <span class="keyword">this</span></div>
<div class="line">    );</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// è®¾ç½®å®ä½“ç®¡ç†å™¨</span></div>
<div class="line">    mapWidget-&gt;setEntityManager(entityManager);</div>
<div class="line">    mapStateManager-&gt;setMapNode(mapNode);</div>
<div class="line">});</div>
<div class="ttc" id="aclassGeoEntityManager_html"><div class="ttname"><a href="classGeoEntityManager.html">GeoEntityManager</a></div><div class="ttdoc">åœ°ç†å®ä½“ç®¡ç†å™¨</div><div class="ttdef"><b>Definition</b> geoentitymanager.h:52</div></div>
<div class="ttc" id="aclassMapStateManager_html"><div class="ttname"><a href="classMapStateManager.html">MapStateManager</a></div><div class="ttdoc">åœ°å›¾çŠ¶æ€ç®¡ç†å™¨</div><div class="ttdef"><b>Definition</b> mapstatemanager.h:85</div></div>
<div class="ttc" id="ageoentitymanager_8h_html"><div class="ttname"><a href="geoentitymanager_8h.html">geoentitymanager.h</a></div><div class="ttdoc">åœ°ç†å®ä½“ç®¡ç†å™¨å¤´æ–‡ä»¶</div></div>
<div class="ttc" id="amapstatemanager_8h_html"><div class="ttname"><a href="mapstatemanager_8h.html">mapstatemanager.h</a></div><div class="ttdoc">åœ°å›¾çŠ¶æ€ç®¡ç†å™¨å¤´æ–‡ä»¶</div></div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md18"></a>
2) åˆ›å»ºå®ä½“</h3>
<div class="fragment"><div class="line"><span class="comment">// æ–¹æ³•1: ç›´æ¥åˆ›å»º</span></div>
<div class="line"><a class="code hl_class" href="classGeoEntity.html">GeoEntity</a>* aircraft = entityManager-&gt;<a class="code hl_function" href="classGeoEntityManager.html#a9f3cb27640f54e0c38f2619f740541f2">createEntity</a>(</div>
<div class="line">    <span class="stringliteral">&quot;aircraft&quot;</span>,            <span class="comment">// å®ä½“ç±»å‹</span></div>
<div class="line">    <span class="stringliteral">&quot;F-15&quot;</span>,                <span class="comment">// å®ä½“åç§°</span></div>
<div class="line">    QJsonObject{},          <span class="comment">// å±æ€§</span></div>
<div class="line">    116.4,                  <span class="comment">// ç»åº¦</span></div>
<div class="line">    39.9,                   <span class="comment">// çº¬åº¦</span></div>
<div class="line">    100000.0                <span class="comment">// é«˜åº¦ï¼ˆç±³ï¼‰</span></div>
<div class="line">);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// æ–¹æ³•2: ä»æ–¹æ¡ˆæ–‡ä»¶åŠ è½½ï¼ˆé€šè¿‡PlanFileManagerï¼‰</span></div>
<div class="line">PlanFileManager* planManager = <span class="keyword">new</span> PlanFileManager(<span class="keyword">this</span>);</div>
<div class="line">planManager-&gt;setEntityManager(entityManager);</div>
<div class="line">planManager-&gt;loadPlan(<span class="stringliteral">&quot;path/to/plan.json&quot;</span>);  <span class="comment">// è‡ªåŠ¨åˆ›å»ºå®ä½“</span></div>
<div class="ttc" id="aclassGeoEntityManager_html_a9f3cb27640f54e0c38f2619f740541f2"><div class="ttname"><a href="classGeoEntityManager.html#a9f3cb27640f54e0c38f2619f740541f2">GeoEntityManager::createEntity</a></div><div class="ttdeci">GeoEntity * createEntity(const QString &amp;entityType, const QString &amp;entityName, const QJsonObject &amp;properties, double longitude, double latitude, double altitude, const QString &amp;uidOverride=QString())</div><div class="ttdoc">åˆ›å»ºå®ä½“</div><div class="ttdef"><b>Definition</b> geoentitymanager.cpp:78</div></div>
<div class="ttc" id="aclassGeoEntity_html"><div class="ttname"><a href="classGeoEntity.html">GeoEntity</a></div><div class="ttdoc">é€šç”¨åœ°ç†å®ä½“åŸºç±»</div><div class="ttdef"><b>Definition</b> geoentity.h:55</div></div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md19"></a>
3) è¿æ¥äº¤äº’ä¿¡å·</h3>
<div class="fragment"><div class="line"><span class="comment">// å®ä½“é€‰æ‹©ä¿¡å·</span></div>
<div class="line">connect(entityManager, &amp;<a class="code hl_signal" href="classGeoEntityManager.html#a40b02c62296b712b7c154e91a04bd52e">GeoEntityManager::entitySelected</a>, </div>
<div class="line">        <span class="keyword">this</span>, [](<a class="code hl_class" href="classGeoEntity.html">GeoEntity</a>* e) {</div>
<div class="line">    qDebug() &lt;&lt; <span class="stringliteral">&quot;é€‰ä¸­å®ä½“:&quot;</span> &lt;&lt; e-&gt;<a class="code hl_function" href="classGeoEntity.html#a245b06bf476b8d9dbee5d4f0d074a7eb">getName</a>();</div>
<div class="line">});</div>
<div class="line"> </div>
<div class="line"><span class="comment">// å®ä½“åŒå‡»ä¿¡å·ï¼ˆæ‰“å¼€å±æ€§ç¼–è¾‘å¯¹è¯æ¡†ï¼‰</span></div>
<div class="line">connect(entityManager, &amp;<a class="code hl_signal" href="classGeoEntityManager.html#a892057b37a941a0170d5451da8e0a961">GeoEntityManager::entityDoubleClicked</a>,</div>
<div class="line">        <span class="keyword">this</span>, [<span class="keyword">this</span>, planManager](<a class="code hl_class" href="classGeoEntity.html">GeoEntity</a>* e) {</div>
<div class="line">    EntityPropertyDialog dialog(e, planManager, <span class="keyword">this</span>);</div>
<div class="line">    dialog.exec();</div>
<div class="line">});</div>
<div class="line"> </div>
<div class="line"><span class="comment">// å®ä½“å³é”®ä¿¡å·</span></div>
<div class="line">connect(entityManager, &amp;<a class="code hl_signal" href="classGeoEntityManager.html#af084398c6a492baa68a1cce1a1ce936a">GeoEntityManager::entityRightClicked</a>,</div>
<div class="line">        <span class="keyword">this</span>, [](<a class="code hl_class" href="classGeoEntity.html">GeoEntity</a>* e, QPoint p) {</div>
<div class="line">    <span class="comment">// æ˜¾ç¤ºå³é”®èœå•</span></div>
<div class="line">    QMenu menu;</div>
<div class="line">    menu.addAction(<span class="stringliteral">&quot;ç¼–è¾‘å±æ€§&quot;</span>, [e, planManager]() {</div>
<div class="line">        EntityPropertyDialog dialog(e, planManager, <span class="keyword">this</span>);</div>
<div class="line">        dialog.exec();</div>
<div class="line">    });</div>
<div class="line">    menu.addAction(<span class="stringliteral">&quot;åˆ é™¤&quot;</span>, [e, planManager]() {</div>
<div class="line">        planManager-&gt;removeEntityFromPlan(e);</div>
<div class="line">        <span class="comment">// åˆ é™¤å®ä½“...</span></div>
<div class="line">    });</div>
<div class="line">    menu.exec(p);</div>
<div class="line">});</div>
<div class="ttc" id="aclassGeoEntityManager_html_a40b02c62296b712b7c154e91a04bd52e"><div class="ttname"><a href="classGeoEntityManager.html#a40b02c62296b712b7c154e91a04bd52e">GeoEntityManager::entitySelected</a></div><div class="ttdeci">void entitySelected(GeoEntity *entity)</div><div class="ttdoc">å®ä½“é€‰ä¸­ä¿¡å·</div></div>
<div class="ttc" id="aclassGeoEntityManager_html_a892057b37a941a0170d5451da8e0a961"><div class="ttname"><a href="classGeoEntityManager.html#a892057b37a941a0170d5451da8e0a961">GeoEntityManager::entityDoubleClicked</a></div><div class="ttdeci">void entityDoubleClicked(GeoEntity *entity)</div><div class="ttdoc">å®ä½“åŒå‡»ä¿¡å·</div></div>
<div class="ttc" id="aclassGeoEntityManager_html_af084398c6a492baa68a1cce1a1ce936a"><div class="ttname"><a href="classGeoEntityManager.html#af084398c6a492baa68a1cce1a1ce936a">GeoEntityManager::entityRightClicked</a></div><div class="ttdeci">void entityRightClicked(GeoEntity *entity, QPoint screenPos)</div><div class="ttdoc">å®ä½“å³é”®ç‚¹å‡»ä¿¡å·</div></div>
<div class="ttc" id="aclassGeoEntity_html_a245b06bf476b8d9dbee5d4f0d074a7eb"><div class="ttname"><a href="classGeoEntity.html#a245b06bf476b8d9dbee5d4f0d074a7eb">GeoEntity::getName</a></div><div class="ttdeci">QString getName() const</div><div class="ttdef"><b>Definition</b> geoentity.h:68</div></div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md20"></a>
4) åœ°å›¾çŠ¶æ€ç›‘æ§</h3>
<div class="fragment"><div class="line"><span class="comment">// åœ°å›¾çŠ¶æ€å˜åŒ–</span></div>
<div class="line">connect(mapStateManager, &amp;<a class="code hl_signal" href="classMapStateManager.html#a6e6d87a50432896f561751a3df4e2551">MapStateManager::stateChanged</a>,</div>
<div class="line">        <span class="keyword">this</span>, [](<span class="keyword">const</span> <a class="code hl_struct" href="structMapStateInfo.html">MapStateInfo</a>&amp; s) {</div>
<div class="line">    qDebug() &lt;&lt; <span class="stringliteral">&quot;ä¿¯ä»°è§’:&quot;</span> &lt;&lt; s.<a class="code hl_variable" href="structMapStateInfo.html#a156b699ac83c3811315947517cc63b01">pitch</a></div>
<div class="line">             &lt;&lt; <span class="stringliteral">&quot;èˆªå‘è§’:&quot;</span> &lt;&lt; s.<a class="code hl_variable" href="structMapStateInfo.html#ab907b39a63403f0eee0eb32e6eb25553">heading</a></div>
<div class="line">             &lt;&lt; <span class="stringliteral">&quot;è·ç¦»:&quot;</span> &lt;&lt; s.<a class="code hl_variable" href="structMapStateInfo.html#af83c22e926353d6f2afab516efd535a2">range</a>;</div>
<div class="line">    qDebug() &lt;&lt; <span class="stringliteral">&quot;è§†è§’ä½ç½®:&quot;</span> &lt;&lt; s.<a class="code hl_variable" href="structMapStateInfo.html#aac2d5f9174e2144e8953164bcb0fe31f">viewLongitude</a> &lt;&lt; s.<a class="code hl_variable" href="structMapStateInfo.html#a4ef9bed8f355751eee313ddc43584b51">viewLatitude</a>;</div>
<div class="line">    qDebug() &lt;&lt; <span class="stringliteral">&quot;é¼ æ ‡ä½ç½®:&quot;</span> &lt;&lt; s.<a class="code hl_variable" href="structMapStateInfo.html#aa7b8dc531adab725018d6e2e66bd1050">mouseLongitude</a> &lt;&lt; s.<a class="code hl_variable" href="structMapStateInfo.html#a13a81506f8c63c5ebb972cfb171ec274">mouseLatitude</a>;</div>
<div class="line">});</div>
<div class="line"> </div>
<div class="line"><span class="comment">// è§†è§’ä½ç½®å˜åŒ–</span></div>
<div class="line">connect(mapStateManager, &amp;<a class="code hl_signal" href="classMapStateManager.html#adad70f1954e3b44c3cc7520802c9bf24">MapStateManager::viewPositionChanged</a>,</div>
<div class="line">        <span class="keyword">this</span>, [](<span class="keywordtype">double</span> lon, <span class="keywordtype">double</span> lat, <span class="keywordtype">double</span> alt) {</div>
<div class="line">    qDebug() &lt;&lt; <span class="stringliteral">&quot;è§†è§’ä½ç½®å˜åŒ–:&quot;</span> &lt;&lt; lon &lt;&lt; lat &lt;&lt; alt;</div>
<div class="line">});</div>
<div class="ttc" id="aclassMapStateManager_html_a6e6d87a50432896f561751a3df4e2551"><div class="ttname"><a href="classMapStateManager.html#a6e6d87a50432896f561751a3df4e2551">MapStateManager::stateChanged</a></div><div class="ttdeci">void stateChanged(const MapStateInfo &amp;state)</div><div class="ttdoc">çŠ¶æ€æ•´ä½“å˜åŒ–é€šçŸ¥ï¼ˆå«ç›¸æœºä¸é¼ æ ‡ï¼‰</div></div>
<div class="ttc" id="aclassMapStateManager_html_adad70f1954e3b44c3cc7520802c9bf24"><div class="ttname"><a href="classMapStateManager.html#adad70f1954e3b44c3cc7520802c9bf24">MapStateManager::viewPositionChanged</a></div><div class="ttdeci">void viewPositionChanged(double longitude, double latitude, double altitude)</div><div class="ttdoc">è§†è§’ä½ç½®å˜åŒ–é€šçŸ¥</div></div>
<div class="ttc" id="astructMapStateInfo_html"><div class="ttname"><a href="structMapStateInfo.html">MapStateInfo</a></div><div class="ttdoc">åœ°å›¾çŠ¶æ€ä¿¡æ¯ç»“æ„ä½“</div><div class="ttdef"><b>Definition</b> mapstatemanager.h:44</div></div>
<div class="ttc" id="astructMapStateInfo_html_a13a81506f8c63c5ebb972cfb171ec274"><div class="ttname"><a href="structMapStateInfo.html#a13a81506f8c63c5ebb972cfb171ec274">MapStateInfo::mouseLatitude</a></div><div class="ttdeci">double mouseLatitude</div><div class="ttdef"><b>Definition</b> mapstatemanager.h:52</div></div>
<div class="ttc" id="astructMapStateInfo_html_a156b699ac83c3811315947517cc63b01"><div class="ttname"><a href="structMapStateInfo.html#a156b699ac83c3811315947517cc63b01">MapStateInfo::pitch</a></div><div class="ttdeci">double pitch</div><div class="ttdef"><b>Definition</b> mapstatemanager.h:45</div></div>
<div class="ttc" id="astructMapStateInfo_html_a4ef9bed8f355751eee313ddc43584b51"><div class="ttname"><a href="structMapStateInfo.html#a4ef9bed8f355751eee313ddc43584b51">MapStateInfo::viewLatitude</a></div><div class="ttdeci">double viewLatitude</div><div class="ttdef"><b>Definition</b> mapstatemanager.h:49</div></div>
<div class="ttc" id="astructMapStateInfo_html_aa7b8dc531adab725018d6e2e66bd1050"><div class="ttname"><a href="structMapStateInfo.html#aa7b8dc531adab725018d6e2e66bd1050">MapStateInfo::mouseLongitude</a></div><div class="ttdeci">double mouseLongitude</div><div class="ttdef"><b>Definition</b> mapstatemanager.h:51</div></div>
<div class="ttc" id="astructMapStateInfo_html_aac2d5f9174e2144e8953164bcb0fe31f"><div class="ttname"><a href="structMapStateInfo.html#aac2d5f9174e2144e8953164bcb0fe31f">MapStateInfo::viewLongitude</a></div><div class="ttdeci">double viewLongitude</div><div class="ttdef"><b>Definition</b> mapstatemanager.h:48</div></div>
<div class="ttc" id="astructMapStateInfo_html_ab907b39a63403f0eee0eb32e6eb25553"><div class="ttname"><a href="structMapStateInfo.html#ab907b39a63403f0eee0eb32e6eb25553">MapStateInfo::heading</a></div><div class="ttdeci">double heading</div><div class="ttdef"><b>Definition</b> mapstatemanager.h:46</div></div>
<div class="ttc" id="astructMapStateInfo_html_af83c22e926353d6f2afab516efd535a2"><div class="ttname"><a href="structMapStateInfo.html#af83c22e926353d6f2afab516efd535a2">MapStateInfo::range</a></div><div class="ttdeci">double range</div><div class="ttdef"><b>Definition</b> mapstatemanager.h:47</div></div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md21"></a>
5) æ–¹æ¡ˆè§„åˆ’ç¤ºä¾‹</h3>
<div class="fragment"><div class="line"><span class="comment">// åˆ›å»ºæ–¹æ¡ˆ</span></div>
<div class="line">PlanFileManager* planManager = <span class="keyword">new</span> PlanFileManager(<span class="keyword">this</span>);</div>
<div class="line">planManager-&gt;setEntityManager(entityManager);</div>
<div class="line">planManager-&gt;createPlan(<span class="stringliteral">&quot;æµ‹è¯•æ–¹æ¡ˆ&quot;</span>, <span class="stringliteral">&quot;è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•æ–¹æ¡ˆ&quot;</span>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// æ·»åŠ å®ä½“åˆ°æ–¹æ¡ˆ</span></div>
<div class="line"><a class="code hl_class" href="classGeoEntity.html">GeoEntity</a>* entity = entityManager-&gt;<a class="code hl_function" href="classGeoEntityManager.html#a9f3cb27640f54e0c38f2619f740541f2">createEntity</a>(...);</div>
<div class="line">planManager-&gt;addEntityToPlan(entity);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// ä¿å­˜æ–¹æ¡ˆ</span></div>
<div class="line">planManager-&gt;savePlan(<span class="stringliteral">&quot;test_plan.json&quot;</span>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// åŠ è½½æ–¹æ¡ˆ</span></div>
<div class="line">planManager-&gt;loadPlan(<span class="stringliteral">&quot;test_plan.json&quot;</span>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// æ¢å¤ç›¸æœºè§†è§’</span></div>
<div class="line"><span class="keywordtype">double</span> lon, lat, alt, heading, pitch, range;</div>
<div class="line"><span class="keywordflow">if</span> (planManager-&gt;getCameraViewpoint(lon, lat, alt, heading, pitch, range)) {</div>
<div class="line">    osgEarth::Viewpoint vp(<span class="stringliteral">&quot;&quot;</span>, lon, lat, alt, heading, pitch, range);</div>
<div class="line">    mapWidget-&gt;getViewer()-&gt;getCameraManipulator()-&gt;setViewpoint(vp);</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md22"></a>
ğŸ”§ æ‰©å±•æŒ‡å—</h2>
<h3><a class="anchor" id="autotoc_md23"></a>
æ·»åŠ æ–°å®ä½“ç±»å‹</h3>
<ol type="1">
<li><b>ç»§æ‰¿GeoEntityåŸºç±»</b> <div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="geoentity_8h.html">geo/geoentity.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">class </span>CustomEntity : <span class="keyword">public</span> <a class="code hl_class" href="classGeoEntity.html">GeoEntity</a> {</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">    CustomEntity(<span class="keyword">const</span> QString&amp; name, <span class="keywordtype">double</span> lon, <span class="keywordtype">double</span> lat, <span class="keywordtype">double</span> alt)</div>
<div class="line">        : <a class="code hl_class" href="classGeoEntity.html">GeoEntity</a>(<span class="stringliteral">&quot;custom&quot;</span>, name, lon, lat, alt) {}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">protected</span>:</div>
<div class="line">    <span class="comment">// å¿…é¡»å®ç°ï¼šåˆ›å»ºOSGèŠ‚ç‚¹</span></div>
<div class="line">    osg::Node* <a class="code hl_function" href="classGeoEntity.html#ac8e3ca23e7d5ac21b4be1bc68e923bb0">createNode</a>()<span class="keyword"> override </span>{</div>
<div class="line">        osg::ref_ptr&lt;osg::Geode&gt; geode = <span class="keyword">new</span> osg::Geode;</div>
<div class="line">        <span class="comment">// æ·»åŠ ä½ çš„å‡ ä½•ä½“æˆ–æ¨¡å‹</span></div>
<div class="line">        <span class="keywordflow">return</span> geode.release();</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// å¯é€‰ï¼šé‡å†™å›è°ƒæ–¹æ³•</span></div>
<div class="line">    <span class="keywordtype">void</span> <a class="code hl_function" href="classGeoEntity.html#af9538b518ef0aeb3ef54f2ae3c65a8e9">onInitialized</a>()<span class="keyword"> override </span>{</div>
<div class="line">        <span class="comment">// åˆå§‹åŒ–å®Œæˆåçš„è‡ªå®šä¹‰é€»è¾‘</span></div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    <span class="keywordtype">void</span> <a class="code hl_function" href="classGeoEntity.html#a8347685965dd2998d0f143c71c3eccfe">onUpdated</a>()<span class="keyword"> override </span>{</div>
<div class="line">        <span class="comment">// æ›´æ–°å®Œæˆåçš„è‡ªå®šä¹‰é€»è¾‘ï¼ˆå¦‚æ›´æ–°æ ‡ç­¾ï¼‰</span></div>
<div class="line">    }</div>
<div class="line">};</div>
<div class="ttc" id="aclassGeoEntity_html_a8347685965dd2998d0f143c71c3eccfe"><div class="ttname"><a href="classGeoEntity.html#a8347685965dd2998d0f143c71c3eccfe">GeoEntity::onUpdated</a></div><div class="ttdeci">virtual void onUpdated()</div><div class="ttdoc">æ›´æ–°å®Œæˆåçš„å›è°ƒï¼Œå­ç±»å¯é‡å†™æ·»åŠ ç‰¹å®šæ›´æ–°é€»è¾‘</div><div class="ttdef"><b>Definition</b> geoentity.h:173</div></div>
<div class="ttc" id="aclassGeoEntity_html_ac8e3ca23e7d5ac21b4be1bc68e923bb0"><div class="ttname"><a href="classGeoEntity.html#ac8e3ca23e7d5ac21b4be1bc68e923bb0">GeoEntity::createNode</a></div><div class="ttdeci">virtual osg::ref_ptr&lt; osg::Node &gt; createNode()=0</div></div>
<div class="ttc" id="aclassGeoEntity_html_af9538b518ef0aeb3ef54f2ae3c65a8e9"><div class="ttname"><a href="classGeoEntity.html#af9538b518ef0aeb3ef54f2ae3c65a8e9">GeoEntity::onInitialized</a></div><div class="ttdeci">virtual void onInitialized()</div><div class="ttdoc">èŠ‚ç‚¹åˆ›å»ºå®Œæˆåçš„å›è°ƒï¼Œå­ç±»å¯é‡å†™æ·»åŠ ç‰¹å®šåˆå§‹åŒ–é€»è¾‘</div><div class="ttdef"><b>Definition</b> geoentity.h:171</div></div>
<div class="ttc" id="ageoentity_8h_html"><div class="ttname"><a href="geoentity_8h.html">geoentity.h</a></div><div class="ttdoc">é€šç”¨åœ°ç†å®ä½“æŠ½è±¡æ¥å£ä¸åŸºç¡€å®ç°ã€‚</div></div>
</div><!-- fragment --></li>
<li><b>åœ¨GeoEntityManagerä¸­æ³¨å†Œ</b> <div class="fragment"><div class="line"><a class="code hl_class" href="classGeoEntity.html">GeoEntity</a>* <a class="code hl_function" href="classGeoEntityManager.html#a9f3cb27640f54e0c38f2619f740541f2">GeoEntityManager::createEntity</a>(...) {</div>
<div class="line">    <span class="keywordflow">if</span> (entityType == <span class="stringliteral">&quot;custom&quot;</span>) {</div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">new</span> CustomEntity(entityName, longitude, latitude, altitude);</div>
<div class="line">    }</div>
<div class="line">    <span class="comment">// ...</span></div>
<div class="line">}</div>
</div><!-- fragment --></li>
</ol>
<h3><a class="anchor" id="autotoc_md24"></a>
æ·»åŠ æ–°äº¤äº’åŠŸèƒ½</h3>
<ol type="1">
<li><b>åœ¨GeoEntityManagerä¸­æ·»åŠ äº‹ä»¶å¤„ç†</b> <div class="fragment"><div class="line"><span class="keywordtype">void</span> <a class="code hl_function" href="classGeoEntityManager.html#ad9cbcb2a80eb716c0112feab412b6e5d">GeoEntityManager::onMousePress</a>(QMouseEvent* event) {</div>
<div class="line">    <span class="comment">// æ·»åŠ ä½ çš„è‡ªå®šä¹‰é¼ æ ‡äº‹ä»¶å¤„ç†</span></div>
<div class="line">}</div>
<div class="ttc" id="aclassGeoEntityManager_html_ad9cbcb2a80eb716c0112feab412b6e5d"><div class="ttname"><a href="classGeoEntityManager.html#ad9cbcb2a80eb716c0112feab412b6e5d">GeoEntityManager::onMousePress</a></div><div class="ttdeci">void onMousePress(QMouseEvent *event)</div><div class="ttdoc">å¤„ç†é¼ æ ‡æŒ‰ä¸‹äº‹ä»¶</div><div class="ttdef"><b>Definition</b> geoentitymanager.cpp:516</div></div>
</div><!-- fragment --></li>
<li><b>å®šä¹‰æ–°ä¿¡å·ï¼ˆå¦‚éœ€è¦ï¼‰</b> <div class="fragment"><div class="line">signals:</div>
<div class="line">    <span class="keywordtype">void</span> customEvent(<a class="code hl_class" href="classGeoEntity.html">GeoEntity</a>* entity);</div>
</div><!-- fragment --></li>
<li><b>åœ¨MainWidgetä¸­è¿æ¥ä¿¡å·</b> <div class="fragment"><div class="line">connect(entityManager, &amp;GeoEntityManager::customEvent,</div>
<div class="line">        <span class="keyword">this</span>, &amp;MainWidget::handleCustomEvent);</div>
</div><!-- fragment --></li>
</ol>
<h2><a class="anchor" id="autotoc_md25"></a>
ğŸ“¦ ä¾èµ–å…³ç³»</h2>
<div class="fragment"><div class="line">MainWidget</div>
<div class="line">â”œâ”€â”€ OsgMapWidget â”€â”€â†’ GeoEntityManager â”€â”€â†’ GeoEntity</div>
<div class="line">â”‚                      â””â”€â†’ MapStateManager</div>
<div class="line">â”œâ”€â”€ PlanFileManager â”€â”€â†’ GeoEntityManager</div>
<div class="line">â”‚     â””â”€â†’ DatabaseUtils (ä»…ç”¨äºåˆå§‹åŠ è½½)</div>
<div class="line">â”œâ”€â”€ ModelDeployDialog â”€â”€â†’ DatabaseUtils</div>
<div class="line">â”œâ”€â”€ ComponentConfigDialog â”€â”€â†’ DatabaseUtils</div>
<div class="line">â””â”€â”€ ModelAssemblyDialog â”€â”€â†’ DatabaseUtils</div>
<div class="line"> </div>
<div class="line">GeoEntityManager</div>
<div class="line">â”œâ”€â”€ GeoEntity (åŸºç±»)</div>
<div class="line">â”‚   â”œâ”€â”€ ImageEntity</div>
<div class="line">â”‚   â””â”€â”€ WaypointEntity</div>
<div class="line">â””â”€â”€ MapStateManager</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md26"></a>
ğŸ“ æ•°æ®å­˜å‚¨</h2>
<h3><a class="anchor" id="autotoc_md27"></a>
æ–¹æ¡ˆæ–‡ä»¶æ ¼å¼</h3>
<p>æ–¹æ¡ˆæ–‡ä»¶ä½¿ç”¨JSONæ ¼å¼å­˜å‚¨ï¼ŒåŒ…å«ï¼š</p><ul>
<li><b>metadata</b> - æ–¹æ¡ˆå…ƒæ•°æ®ï¼ˆåç§°ã€æè¿°ã€åˆ›å»ºæ—¶é—´ç­‰ï¼‰</li>
<li><b>entities</b> - å®ä½“åˆ—è¡¨ï¼ˆåŒ…å«å®Œæ•´çš„ç»„ä»¶ä¿¡æ¯æ·±å±‚å¤åˆ¶ï¼‰</li>
<li><b>camera</b> - ç›¸æœºè§†è§’ä¿¡æ¯</li>
<li><b>version</b> - æ–‡ä»¶æ ¼å¼ç‰ˆæœ¬</li>
</ul>
<h3><a class="anchor" id="autotoc_md28"></a>
ç»„ä»¶ä¿¡æ¯æ·±å±‚å¤åˆ¶</h3>
<p>æ–¹æ¡ˆæ–‡ä»¶ä¸­çš„ç»„ä»¶ä¿¡æ¯åŒ…å«å®Œæ•´çš„é…ç½®ï¼š</p><ul>
<li><code>componentId</code> - ç»„ä»¶ID</li>
<li><code>name</code> - ç»„ä»¶åç§°</li>
<li><code>type</code> - ç»„ä»¶ç±»å‹</li>
<li><code>configInfo</code> - å®Œæ•´é…ç½®ä¿¡æ¯</li>
<li><code>templateInfo</code> - æ¨¡æ¿ä¿¡æ¯ï¼ˆç”¨äºç¼–è¾‘ï¼‰</li>
</ul>
<p>è¿™ä½¿å¾—æ–¹æ¡ˆæ–‡ä»¶å®Œå…¨ç‹¬ç«‹ï¼Œå¯åœ¨æ— æ•°æ®åº“ç¯å¢ƒä¸‹ä½¿ç”¨ã€‚</p>
<h2><a class="anchor" id="autotoc_md29"></a>
ğŸ” å·¥å…·ç±»ä½¿ç”¨</h2>
<h3><a class="anchor" id="autotoc_md30"></a>
GeoUtils - åœ°ç†å·¥å…·ç±»</h3>
<div class="fragment"><div class="line"><span class="comment">// å±å¹•åæ ‡è½¬åœ°ç†åæ ‡</span></div>
<div class="line"><span class="keywordtype">double</span> lon, lat, alt;</div>
<div class="line"><span class="keywordflow">if</span> (<a class="code hl_function" href="classGeoUtils.html#a60a85d8c7799bcfb9e1b729fa9fad53a">GeoUtils::screenToGeoCoordinates</a>(viewer, mapNode, screenPos, lon, lat, alt)) {</div>
<div class="line">    qDebug() &lt;&lt; <span class="stringliteral">&quot;åœ°ç†åæ ‡:&quot;</span> &lt;&lt; lon &lt;&lt; lat &lt;&lt; alt;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// è·å–EarthManipulator</span></div>
<div class="line">osgEarth::Util::EarthManipulator* em = <a class="code hl_function" href="classGeoUtils.html#a730699e406bbc152d255919a80cbe9d7">GeoUtils::getEarthManipulator</a>(viewer);</div>
<div class="line"><span class="keywordflow">if</span> (em) {</div>
<div class="line">    osgEarth::Viewpoint vp(<span class="stringliteral">&quot;&quot;</span>, lon, lat, alt, heading, pitch, range);</div>
<div class="line">    em-&gt;setViewpoint(vp, 2.0);  <span class="comment">// 2ç§’åŠ¨ç”»è¿‡æ¸¡</span></div>
<div class="line">}</div>
<div class="ttc" id="aclassGeoUtils_html_a60a85d8c7799bcfb9e1b729fa9fad53a"><div class="ttname"><a href="classGeoUtils.html#a60a85d8c7799bcfb9e1b729fa9fad53a">GeoUtils::screenToGeoCoordinates</a></div><div class="ttdeci">static bool screenToGeoCoordinates(osgViewer::Viewer *viewer, osgEarth::MapNode *mapNode, QPoint screenPos, double &amp;longitude, double &amp;latitude, double &amp;altitude)</div><div class="ttdoc">å°†å±å¹•åæ ‡è½¬æ¢ä¸ºåœ°ç†åæ ‡</div><div class="ttdef"><b>Definition</b> geoutils.cpp:40</div></div>
<div class="ttc" id="aclassGeoUtils_html_a730699e406bbc152d255919a80cbe9d7"><div class="ttname"><a href="classGeoUtils.html#a730699e406bbc152d255919a80cbe9d7">GeoUtils::getEarthManipulator</a></div><div class="ttdeci">static osgEarth::Util::EarthManipulator * getEarthManipulator(osgViewer::Viewer *viewer)</div><div class="ttdoc">è·å–Viewerçš„EarthManipulator</div><div class="ttdef"><b>Definition</b> geoutils.cpp:344</div></div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md31"></a>
DatabaseUtils - æ•°æ®åº“å·¥å…·ç±»</h3>
<div class="fragment"><div class="line"><span class="comment">// è®¾ç½®æ•°æ®åº“è·¯å¾„</span></div>
<div class="line">DatabaseUtils::setDatabasePath(<span class="stringliteral">&quot;path/to/database.db&quot;</span>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// æ‰“å¼€æ•°æ®åº“</span></div>
<div class="line"><span class="keywordflow">if</span> (DatabaseUtils::openDatabase()) {</div>
<div class="line">    <span class="comment">// æ‰§è¡ŒæŸ¥è¯¢</span></div>
<div class="line">    QSqlQuery query;</div>
<div class="line">    query.exec(<span class="stringliteral">&quot;SELECT * FROM ModelInformation&quot;</span>);</div>
<div class="line">    <span class="comment">// ...</span></div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md32"></a>
ğŸ“– ç‰ˆæœ¬ä¿¡æ¯</h2>
<ul>
<li><b>å½“å‰ç‰ˆæœ¬</b>: 2.2.0</li>
<li><b>æœ€æ–°æ›´æ–°</b>: 2025-11-05</li>
<li><b>æ–‡æ¡£ç‰ˆæœ¬</b>: 1.0</li>
</ul>
<h2><a class="anchor" id="autotoc_md33"></a>
ğŸ“š ç”Ÿæˆæ–‡æ¡£</h2>
<h3><a class="anchor" id="autotoc_md34"></a>
Windowsç¯å¢ƒ</h3>
<ol type="1">
<li><b>å®‰è£…Doxygen</b><ul>
<li>è®¿é—® <a href="https://www.doxygen.nl/download.html">https://www.doxygen.nl/download.html</a></li>
<li>ä¸‹è½½å¹¶å®‰è£…Windowsç‰ˆæœ¬</li>
</ul>
</li>
<li><b>ç”Ÿæˆæ–‡æ¡£</b> <div class="fragment"><div class="line">doxygen Doxyfile</div>
</div><!-- fragment --></li>
<li><b>æŸ¥çœ‹æ–‡æ¡£</b><ul>
<li>æ‰“å¼€ <code>docs/html/index.html</code></li>
</ul>
</li>
</ol>
<h3><a class="anchor" id="autotoc_md35"></a>
æ–‡æ¡£å¯¼èˆª</h3>
<ul>
<li><b>Modules</b> - æŸ¥çœ‹æ¨¡å—åˆ†ç»„ï¼ˆGeo Entitiesã€Managersï¼‰</li>
<li><b>Classes</b> - æŸ¥çœ‹æ‰€æœ‰ç±»åˆ—è¡¨</li>
<li><b>Files</b> - æŸ¥çœ‹æ–‡ä»¶åˆ—è¡¨</li>
<li><b>æœç´¢</b> - ä½¿ç”¨é¡¶éƒ¨æœç´¢æ¡†å¿«é€ŸæŸ¥æ‰¾</li>
</ul>
<h2><a class="anchor" id="autotoc_md36"></a>
ğŸ“„ è®¸å¯è¯</h2>
<p>è¯·å‚è€ƒé¡¹ç›®æ ¹ç›®å½•çš„LICENSEæ–‡ä»¶ã€‚</p>
<h2><a class="anchor" id="autotoc_md37"></a>
ğŸ”— ç›¸å…³æ–‡æ¡£</h2>
<ul>
<li><b>README.md</b> - é¡¹ç›®æ¦‚è¿°å’Œå¿«é€Ÿå¼€å§‹æŒ‡å—</li>
<li><b>WorkRecord.md</b> - å¼€å‘å†å²å’Œæ›´æ–°æ—¥å¿—</li>
<li><b>APIæ–‡æ¡£</b> - ä½¿ç”¨Doxygenç”Ÿæˆçš„å®Œæ•´APIæ–‡æ¡£</li>
</ul>
<hr  />
<p><b>æ³¨æ„</b>: æœ¬é¡¹ç›®éœ€è¦é¢„å…ˆå®‰è£…OSGå’ŒosgEarthåº“ã€‚è¯·ç¡®ä¿è¿™äº›åº“æ­£ç¡®é…ç½®åœ¨ç³»ç»Ÿç¯å¢ƒå˜é‡ä¸­ï¼Œæˆ–åœ¨é¡¹ç›®é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šæ­£ç¡®çš„è·¯å¾„ã€‚ </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">åˆ¶ä½œè€… <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
